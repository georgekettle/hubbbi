<% if user_signed_in? %>
  <% playing ||= false %>
  <% group_member = current_user.group_members.find_by(group: Current.group) %>

  <div data-controller="modal audio" data-audio-playing-value="<%= playing %>" id="<%= dom_id_for_records(group_member, prefix:"mobile_navbar") %>">
    <div class="fixed w-screen bottom-0 left-0" style="z-index: 999">
      <!-- media player -->
      <div class="flex justify-center md:mb-4">
        <%= render 'components/media_player' %>
      </div>
      <!-- mobile navbar -->
      <div class="md:hidden w-full bg-white border-t flex items-center justify-center p-2 pb-3">
        <%= link_to Current.group, class: "mx-2 h-10 w-10 stroke-current text-gray-400 hover:text-gray-900 flex items-center justify-center rounded-full" do %>
          <%= render "icons/library", classes: "h-7 w-7" %>
        <% end %>
        <%= link_to GroupMember.find_by(user: current_user, group: Current.group), class: "mx-2 h-10 w-10 stroke-current text-gray-400 hover:text-gray-900 flex items-center justify-center rounded-full" do %>
          <%= render "icons/profile", classes: "h-7 w-7" %>
        <% end %>
      </div>
    </div>
    <div data-modal-target="container" data-action="click->modal#closeBackground keyup@window->modal#closeWithKeyboard" class="hidden animated fadeInUp fixed inset-0 overflow-y-auto flex items-center justify-center pt-8 h-screen" style="z-index: 9999;">
      <%= render 'components/media_modal' %>
    </div>
  </div>
<% end %>

