<%= render "components/headers/header", header: "All participants", subheader: @course.title, back_link: course_path(@course) do %>
  <% if policy(@course).update? %>
    <div data-controller="modal">
      <%= link_to '#', class: 'icon-btn', data: { action: "click->modal#open" } do %>
        <%= render 'icons/add_user', classes:"text-gray-900 stroke-current" %>
      <% end %>

      <%= render 'components/modal_container', header: "Add participants", subheader: "To #{@course.title}", no_padding: true do %>
        <%= render 'form', course: @course %>
      <% end %>
    </div>
  <% end %>
<% end %>

<%= render "shared/container", classes: "p-4" do %>
  <%= render('components/filters/search_filter', container_id:'course_members', placeholder:'Search users') do %>
    <% @course_members.each_with_index do |member, index| %>
      <div class="filter-item" data-filter-text="<%= "#{member.user.full_name} #{member.user.display_name} #{member.user.email}" %>" style="position: relative; z-index: <%= 500 - index %>"> <!-- in order to show dropdown above items below -->
        <%= render "list_item", course_member: member %>
      </div>
    <% end %>
  <% end %>
<% end %>
