<%= render "components/headers/header", header: @page.title, subheader: @page.subtitle, back_link: @page.parent_page || @page.belonging_to_course do %>
  <% if policy(@page).update? %>
    <div data-controller="dropdown" class="relative">
      <button type="button" class="icon-btn" data-action="dropdown#toggle click@window->dropdown#hide">
        <%= render 'icons/options', classes: "h-5 w-5" %>
      </button>

      <div
        data-dropdown-target="menu"
        class="transition transform origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none overflow-hidden"
        data-transition-enter-from="opacity-0 scale-95"
        data-transition-enter-to="opacity-100 scale-100"
        data-transition-leave-from="opacity-100 scale-100"
        data-transition-leave-to="opacity-0 scale-95"
      >
        <%= link_to "Edit content", edit_sections_page_path(@page), class: "dropdown-link" %>
        <%= link_to("Settings", settings_page_path(@page), class: "dropdown-link") if policy(@page).update? %>
        <%= link_to "Delete page", page_path(@page), method: :delete, data: {confirm: "Are you sure you want to delete this page?"}, class: "dropdown-link-danger" %>
      </div>
    </div>
  <% end %>
<% end %>
<%= render "pages/page_content", page: @page %>
